<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1"><link href=/css/fonts.css rel=stylesheet type=text/css><title>Image Popup and Octopress</title><link rel=stylesheet href=/css/hugo-octopress.css><link rel=stylesheet href=/css/fork-awesome.min.css><link href=https://parsiya.net/favicon.png rel=icon><meta name=description content><meta name=keywords content="[Parsia Hakimian Parsiya infosec information security]"><meta name=author content="Parsia"><meta name=generator content="Hugo 0.148.1"><meta name=twitter:card content="summary"><meta name=twitter:title content="Image Popup and Octopress"><meta name=twitter:description content="Update: I have migrated the blog to Hugo and I do not use this anymore. However, it is still in the repository.
I finally realized that I need an image popup plugin. The image plugins that I usually use do not support this. They are fine for normal images but not for larger ones. When I see a screenshot of a tool, I want to be able to zoom in. In my quest I looked at a few plugins and methods and finally decided to use https://github.com/ctdk/octopress-image-popup. It creates resized thumbnails automatically and the installation procedure is short and simple.
However, it did not work for me out of the box. I created a test post with just an image and while the plugin worked, there are things that I did not like about it."><meta name=twitter:domain content="parsiya.net"><meta name=twitter:creator content="@CryptoGangsta"></head><body><header role=banner><hgroup><h1><a href=https://parsiya.net/>Hackerman's Hacking Tutorials</a></h1><h2>The knowledge of anything, since all things have causes, is not acquired or
complete unless it is known by its causes. - Avicenna</h2></hgroup></header><nav role=navigation><fieldset class=mobile-nav><select onchange="location=this.value"><option value>Navigate…</option><option value=https://parsiya.net/about/>» About Me!</option><option value=https://parsiya.net/cheatsheet/>» Cheat Sheet</option><option value=https://parsiya.io/>» My Clone</option><option value=https://github.com/parsiya/parsiya.net>» Source Repo</option><option value="https://queue.acm.org/detail.cfm?id=3197520">» Manual Work is a Bug</option><option value="https://www.google.com/search?q=andrew+ridgeley">» The Other Guy from Wham!</option></select></fieldset><ul class=main-navigation><li><a href=https://parsiya.net/about/ title="About Me!" target=_blank rel="noopener noreferrer">About Me!</a></li><li><a href=https://parsiya.net/cheatsheet/ title="Cheat Sheet" target=_blank rel="noopener noreferrer">Cheat Sheet</a></li><li><a href=https://parsiya.io/ title="My Clone" target=_blank rel="noopener noreferrer">My Clone</a></li><li><a href=https://github.com/parsiya/parsiya.net title="Source Repo" target=_blank rel="noopener noreferrer">Source Repo</a></li><li><a href="https://queue.acm.org/detail.cfm?id=3197520" title="Manual Work is a Bug" target=_blank rel="noopener noreferrer">Manual Work is a Bug</a></li><li><a href="https://www.google.com/search?q=andrew+ridgeley" title="The Other Guy from Wham!" target=_blank rel="noopener noreferrer">The Other Guy from Wham!</a></li></ul><ul class=subscription><a href=https://parsiya.net/index.xml target=_blank type=application/rss+xml title=RSS rel="noopener noreferrer"><i class="fa fa-rss-square fa-lg"></i></a></ul><form action=https://www.google.com/search method=get target=_blank rel="noopener noreferrer"><fieldset role=search><input class=search type=text name=q results=0 placeholder=Search>
<input type=hidden name=q value=site:https://parsiya.net/></fieldset></form></nav><div id=main><div id=content><div><article class=hentry role=article><header><p class=meta>Jul 26, 2015
- 3 minute read - <a class=label href=https://parsiya.net/categories/octopress/>Octopress </a><a class=label href=https://parsiya.net/categories/not-security/>Not Security</a></p><h1 class=entry-title>Image Popup and Octopress</h1></header><div class=entry-content><p><strong>Update</strong>: I have migrated the blog to <a href=https://gohugo.io target=_blank rel="noreferrer noopener">Hugo</a> and I do not use this anymore. However, it is still in the repository.</p><p>I finally realized that I need an image popup plugin. The image plugins that I usually use do not support this. They are fine for normal images but not for larger ones. When I see a screenshot of a tool, I want to be able to zoom in. In my quest I looked at a few plugins and methods and finally decided to use <a href=https://github.com/ctdk/octopress-image-popup target=_blank rel="noreferrer noopener">https://github.com/ctdk/octopress-image-popup</a>. It creates resized thumbnails automatically and the installation procedure is short and simple.</p><p>However, it did not work for me out of the box. I created a test post with just an image and while the plugin worked, there are things that I did not like about it.</p><span class=caption-wrapper><img class=caption src=/images/2015/popup1/pew1.jpg title="test post" alt="test post">
<span class=caption-text>test post</span></span><p>There is this text "Click the image for a larger view." and there is also an unresized copy of the image on the page.</p><p>By inspecting these two elements, we can find the culprits in the page source (comments are mine).</p><figure class=code><figcaption><span>page source</span></figcaption><div class=codewrapper><div class=highlight><div style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>...
</span></span><span style=display:flex><span>&lt;<span style=color:#268bd2>div</span> class<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;imgpopup screen&#34;</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#586e75>&lt;!-- caption --&gt;</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#268bd2>div</span> class<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;caption&#34;</span>&gt;Click the image for a larger view.&lt;/<span style=color:#268bd2>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#268bd2>a</span> href<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;javascript:void(0)&#34;</span> style<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;text-decoration: none&#34;</span> id<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;image-1&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#268bd2>img</span> src<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;/images/2015/pew.jpg&#34;</span> width<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;300&#34;</span> height<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;221&#34;</span> alt<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;Click me.&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#268bd2>a</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#586e75>&lt;!-- unresized copy --&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#268bd2>div</span> class<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;illustration print&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#268bd2>img</span> src<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;/images/2015/pew.jpg&#34;</span> width<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;600&#34;</span> height<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;441&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#268bd2>div</span>&gt;</span></span></code></pre></td></tr></table></div></div></div></figure><p>During installation we have only copied two files (apart from editing <code>head.html</code>): <code>img_popup.rb</code> and <code>img_popup.html.erb</code>. The html file is probably your first guess to and you are right. Inside we can see html tags (original copy is at <a href=https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.html.erb target=_blank rel="noreferrer noopener">https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.html.erb</a>):</p><figure class=code><figcaption><span>img_popup.html.erb</span></figcaption><div class=codewrapper><div class=highlight><div style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#268bd2>div</span> class<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;imgpopup screen&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#268bd2>div</span> class<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;caption&#34;</span>&gt;Click the image for a larger view.&lt;/<span style=color:#268bd2>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#268bd2>a</span> href<span style=color:#719e07>=</span><span style=color:#2aa198>&#39;javascript:void(0)&#39;</span> style<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;text-decoration: none&#34;</span> id<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;image-&lt;%= id %&gt;&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#268bd2>img</span> src<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;&lt;%= scaled_image %&gt;&#34;</span>
</span></span><span style=display:flex><span>         width<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;&lt;%= scaled_width %&gt;&#34;</span> height<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;&lt;%= scaled_height %&gt;&#34;</span>
</span></span><span style=display:flex><span>         alt<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;Click me.&#34;</span>/&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#268bd2>a</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#268bd2>div</span> class<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;illustration print&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#268bd2>img</span> src<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;&lt;%= image %&gt;&#34;</span> width<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;&lt;%= full_width %&gt;&#34;</span> height<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;&lt;%= full_height %&gt;&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#268bd2>div</span>&gt;</span></span></code></pre></td></tr></table></div></div></div></figure><p>I am not quite sure what this <code>erb</code> file does but it looks like to be a blueprint for the final html content. We can just remove those parts that we want: the caption and the "illustration print" class.</p><p>Another problem is after we click on the image. There is no space between image title and the "close" link.</p><span class=caption-wrapper><img class=caption src=/images/2015/popup1/pew2.jpg title="pew pew popup" alt="pew pew popup">
<span class=caption-text>pew pew popup</span></span><p>To fix this we need to modify <code>img_popup.rb</code> (original at <a href=https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.rb target=_blank rel="noreferrer noopener">https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.rb</a>):</p><figure class=code><figcaption><span>img_popup.rb</span></figcaption><div class=codewrapper><div class=highlight><div style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>...
</span></span><span style=display:flex><span>vars = {
</span></span><span style=display:flex><span>  &#39;id&#39;      =&gt; @@id.to_s,
</span></span><span style=display:flex><span>  &#39;image&#39;   =&gt; @path,
</span></span><span style=display:flex><span>  &#39;title&#39;   =&gt; @title
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...</span></span></code></pre></td></tr></table></div></div></div></figure><p>We can see <code>title</code> saved in <code>vars['title']</code>. So we can just add a space to the end of it using the following line:<br><code>vars['title'] += " "</code></p><p>And that's it, it works as you can see in this post. Modified code is at: <a href=https://github.com/parsiya/Random-Code/tree/master/octopress-image-popup-forked target=_blank rel="noreferrer noopener">https://bitbucket.org/parsiya/octopress-image-popup-forked</a>. I hope I did not mess up the licensing and such :).</p><p>Update August 1, 2015: The tag adds this annoying extra line(s) before the image on the page. I have not had time to look into removing it. To be honest I do not like it that much. I will be using the image caption tag if the image is big enough to not need a pop-up.</p></div><footer><p class=meta><span class="byline author vcard">Posted by <span class=fn>Parsia</span></span><time>Jul 26, 2015</time>
<span class=categories>Tags:<a class=category href=https://parsiya.net/tags/imgpopup>imgpopup</a> <a class=category href=https://parsiya.net/tags/blog>Blog</a></span></p><p class=meta><a class="basic-alignment left" href=https://parsiya.net/blog/2015-01-06-tales-from-the-crypto-leaking-aes-keys/ title="Tales from the Crypt(o) - Leaking AES Keys">Tales from the Crypt(o) - Leaking AES Keys</a>
<a class="basic-alignment right" href=https://parsiya.net/blog/2015-08-01-network-traffic-attribution-on-windows/ title="Network Traffic Attribution on Windows">Network Traffic Attribution on Windows</a></p></footer></article></div><aside class="sidebar thirds"><section class="first odd"><h1>Who am I?</h1><p><p>I am Parsia, a security engineer at Microsoft.</p><p>I write about application security, cryptography, static analysis, and
(of course) videogames.</p><p>Click on <a href=/about/>About Me!</a> to know more. Contact me via any of these ways.</p></p></section><ul class=sidebar-nav><li class=sidebar-nav-item><a target=_blank rel="me noopener noreferrer" href=https://infosec.exchange/@parsiya title=https://infosec.exchange/@parsiya><i class="fa fa-mastodon fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://github.com/parsiya/ title=https://github.com/parsiya/><i class="fa fa-github fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://twitter.com/cryptogangsta/ title=https://twitter.com/cryptogangsta/><i class="fa fa-twitter fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://www.linkedin.com/in/parsiya title=https://www.linkedin.com/in/parsiya><i class="fa fa-linkedin fa-3x"></i></a></li></ul><section class=odd><h1>Collections</h1><li><a href=https://parsiya.net/categories/thick-client-proxying/ title="Thick Client Proxying">Thick Client Proxying</a></li><li><a href=https://parsiya.net/categories/writeup/ title=CTFs/Writeups>CTFs/Writeups</a></li><li><a href=https://parsiya.net/categories/attack-surface-analysis/ title="Attack Surface Analysis">Attack Surface Analysis</a></li><li><a href=https://parsiya.net/categories/static-analysis/ title="Static Analysis">Static Analysis</a></li><li><a href=https://parsiya.net/categories/bug-bounty/ title="Bug Bounty">Bug Bounty</a></li><li><a href=https://parsiya.net/categories/blockchain/ title="Blockchain (lol)">Blockchain (lol)</a></li><li><a href=https://parsiya.net/categories/crypto/ title=Crypto(graphy)>Crypto(graphy)</a></li><li><a href=https://parsiya.net/categories/burp-extension/ title="Burp Extension Development">Burp Extension Development</a></li><li><a href=https://parsiya.net/categories/automation/ title=Automation>Automation</a></li><li><a href=https://parsiya.net/categories/reverse-engineering/ title="Reverse Engineering">Reverse Engineering</a></li><li><a href=https://parsiya.net/categories/winappdbg/ title="WinAppDbg (use Frida instead)">WinAppDbg (use Frida instead)</a></li><li><a href=https://awsome.pw title='AWSome.pw - S3 bucket squatting - my very "legit" branded vulnerability'>AWSome.pw - S3 bucket squatting - my very "legit" branded vulnerability</a></li></section></aside></div></div><footer role=contentinfo><p>Copyright &copy; 2025 Parsia - <a href=https://parsiya.net/license/>License</a> -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io rel="noopener noreferrer">Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/ rel="noopener noreferrer">Hugo-Octopress</a> theme.</p></footer></body></html>